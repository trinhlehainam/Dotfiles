" Setting
net nowrap
set scrolloff=8
net ignorecase
net smartcase
set number
set relativenumber

" Plugins
" set NERDTree
set surround
set commentary
set ideajoin
set ideaput
set multiple-cursors

" Which key
set which-key
set notimeout
let g:WhichKey_FontSize = 16
let g:WhichKey_SortOrder = "by_key_prefix_first"
let g:WhichKey_ShowTypedSequence = "true"

" Keymaps
let mapleader=" "
  
" https://github.com/JetBrains/ideavim/discussions/303#discussioncomment-10408136
nmap <leader>vr <Action>(IdeaVim.ReloadVimRc.reload)

nmap <Esc> :action HideActiveWindow<cr>
inoremap jk <Esc>

noremap gh ^
noremap gl $

" Windows Navigation
nnoremap <C-h> <c-w>h  
nnoremap <C-j> <c-w>j
nnoremap <C-k> <c-w>k  
nnoremap <C-l> <c-w>l  

" Tmux like
nnoremap <C-a>- :action SplitHorizontally<cr>
nnoremap <C-a>\ :action SplitVertically<cr> 

" Move Next/Pre letter in INSERT mode
inoremap <A-h> <Esc>i
inoremap <A-l> <Esc>la

" Telescope fzf like keymap 
noremap <leader>sf :action GotoFile<cr>
noremap <leader>sg :action SearchEverywhere<cr>
noremap <leader>sw :action TextSearchAction<cr>
noremap <leader>/ :action Find<cr>
" noremap <leader>ds :action ActivateStructureToolWindow<cr>
noremap <leader><space> :action Switcher<cr>

" Nvim lsp like keymap
noremap grn :action RenameElement<cr>
noremap gra :action ShowIntentionActions<cr>
noremap grd :action GotoDeclaration<cr>
noremap grr :action ShowUsages<cr>
noremap grt :action GotoTypeDeclaration<cr>
noremap gri :action ReSharperGotoImplementation<cr>
noremap gO :action GotoSymbol<cr>

" Diagnostic keymap 
noremap [d :action GotoNextError<cr>
noremap ]d :action GotoPreviousError<cr>
noremap <leader>e :action ShowErrorDescription<cr>
noremap <leader>q :action ActivateProblemsViewToolWindow<cr>

noremap K :action QuickJavaDoc<cr>
noremap <C-k> : action ParameterInfo<cr>

noremap <leader>b :action BuildButton<cr>

noremap == :action ReformatCode<cr>
vnoremap == :action ReformatCode<cr>

noremap <A-j> :action MoveLineDown<cr>:action ReformatCode<CR>
noremap <A-k> :action MoveLineUp<cr>:action ReformatCode<CR>
inoremap <A-j> <Esc>:action MoveLineDown<cr>:action ReformatCode<CR>a
inoremap <A-k> <Esc>:action MoveLineUp<cr>:action ReformatCode<CR>a

noremap bk :action NextTab<cr>
noremap bj :action PreviousTab<cr>
noremap bc :action CloseContent<cr>

noremap <C-i> :action Forward<cr>
noremap <C-o> :action Back<cr>

vnoremap <C-y> :action EditorCopy<cr><C-c>
noremap <C-p> :action EditorPaste<cr>

" noremap <C-z> :action ToggleDistractionFreeMode<cr>
noremap <leader>tt :action ActivateProjectToolWindow<cr>
noremap sb :action ActivateBuildToolWindow<cr>
noremap <C-\> :action ActivateTerminalToolWindow<cr>

" Git
noremap <leader>gs :action ActivateVersionControlToolWindow<cr>
noremap <leader>gu :action Vcs.UpdateProject<cr>
noremap <leader>gf :action Git.Fetch<cr>
noremap <leader>gc :action CheckinProject<cr> 
noremap <leader>gd :action ActivateVcsChangesToolWindow<cr>
noremap ]c :action NextDiff<cr>
noremap [c :action PreviousDiff<cr>
noremap <Tab> :action Diff.NextChange<cr>
noremap <S-Tab> :action Diff.PrevChange<cr>

" Remap multiple-cursors keys
map mc <A-n>
map mx <A-x>
map mp <A-p>
